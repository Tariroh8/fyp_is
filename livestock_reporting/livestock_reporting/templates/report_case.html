{% extends "base1.html" %}
{% load crispy_forms_tags %}

{% block title %}
Report case
{% endblock %}


{% block content %}

<br><br>
    <center>
      <div class="my-form">
        <h5 class="card-title">Fill in the fields to report</h5>
        <hr>
    <div class="container">
      <div class="form-group">
        <form method="post" id="case-form">
          {% csrf_token %}
          {{ form|crispy}}
          <button type="submit">Submit</button>
        </form>
      </div>
    </div>
  </div>
    
    <br><br>
  <div class="coordinates">
  <div class="alert alert-primary" role="alert" id="output"></div>
  </div>
</center>

    {% endblock %}


    {% block script %}
      
  
    <script>
      if (!navigator.geolocation) {
        throw new Error("No geolocation available");
      }
  
      function success(position) {
        const lat = position.coords.latitude;
        const lng = position.coords.longitude;
  
        document.getElementById('id_lat').value = lat;
        document.getElementById('id_long').value = lng;
  
        const markup = `<p>Your current position: latitude: ${lat}, longitude: ${lng}</p>`;
        document.getElementById('output').innerHTML = markup;
      }
  
      function error() {                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
        document.getElementById('output').innerHTML = "<p>Error retrieving location.</p>";
      }
  
      const options = {};
      navigator.geolocation.getCurrentPosition(success, error, options);
    </script>

    <script>
      $("#id_district").select2();
      $("#id_ward").select2();
      $("#id_farmer1").select2();
      $("#id_symptoms").select2();
      $("#id_spece").select2();

      
    </script>

    {% endblock %}

